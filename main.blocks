<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="#s`_Y[xa;[sh*VP;cEiI">strip</variable><variable id="~w}BR%48*Ul9s.CRKKv+">range</variable><variable id="NqWw1MSFxE47$`.zvIlz">light_level_max</variable><variable id="Ns_]BsiW=M1B}w6#/r$.">light_level_min</variable><variable id="|`cd$~RqO3ekm*x]+A7D">light_level_diff</variable></variables><block type="pxt-on-start" id="kZcT$hk5?s^3}4`k!HLg" x="0" y="0"><comment>INITIALIZE</comment><statement name="HANDLER"><block type="basic_show_icon" id="?!PGOlG?ZL$aUbdy`/%|"><field name="i">IconNames.Heart</field><next><block type="variables_set" id="4hnmurxBZ)w9{@N]W.r]"><field name="VAR" id="#s`_Y[xa;[sh*VP;cEiI">strip</field><value name="VALUE"><shadow xmlns="http://www.w3.org/1999/xhtml" type="math_number"><field name="NUM">0</field></shadow><block type="neopixel_create" id="=-O`|ZlmYrq(*c`9g4d3"><field name="pin">DigitalPin.P0</field><field name="mode">NeoPixelMode.RGB</field><value name="numleds"><shadow type="math_number" id="=3;7rX@}U}Ka*%//BwWz"><field name="NUM">6</field></shadow></value></block></value><next><block type="device_pause" id="rG%)(FhSp$Ex@c=.]RWV"><value name="pause"><shadow type="timePicker" id="jzF0blId:K5,Ss!/!S!Z"><field name="ms">100</field></shadow></value><next><block type="basic_show_icon" id="TE@88y]*+E(%0WdB$91e"><field name="i">IconNames.Yes</field><next><block type="device_clear_display" id="S9!zjkzqeY|z+,%lTXm4"><next><block type="variables_set" id="]]M!doi$0X.=rhJAruxb"><field name="VAR" id="NqWw1MSFxE47$`.zvIlz">light_level_max</field><value name="VALUE"><shadow type="math_number" id="X;+i{`-I9}wfqNks^./|"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="t+=DR^g1aW)FeOZ$jYBz"><field name="VAR" id="Ns_]BsiW=M1B}w6#/r$.">light_level_min</field><value name="VALUE"><shadow type="math_number" id="pv9RS(HJ(o7Ge-f1qSTV"><field name="NUM">255</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="]{JQr![,ppwtIaJ*T%NS" x="0" y="463"><comment>CONTROL LED</comment><statement name="HANDLER"><block type="controls_if" id="2VkRB8=X^@)JZ2ma!X2|"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean" disabled="true"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="#K$)2iop4PW;Sj*oaT2:"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="tYhR@l1Ep;f[gJsq7/FT"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" disabled="true"><field name="NUM">0.5</field></shadow><block type="device_get_light_level" id=";=.[W1J*,0nBid^%Uf:A"/></value><value name="B"><shadow type="math_number" disabled="true"><field name="NUM">0</field></shadow><block type="variables_get" id="h`e+P8DH]-A9u.Oz~zF;"><field name="VAR" id="Ns_]BsiW=M1B}w6#/r$.">light_level_min</field></block></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">80</field></shadow><block type="math_arithmetic" id="2~2kJw.HMi;oU{=!LD^+"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="i_vk`edSVr%UA7NxIX0P"><field name="NUM">0.3</field></shadow></value><value name="B"><shadow type="math_number" disabled="true"><field name="NUM">0</field></shadow><block type="variables_get" id="(xa%+}mp%~6+OMUrtQSY"><field name="VAR" id="|`cd$~RqO3ekm*x]+A7D">light_level_diff</field></block></value></block></value></block></value><statement name="DO0"><block type="neopixel_set_strip_color" id="^.gl_#a1(iaz}2MRmw#M"><value name="strip"><block type="variables_get" id=")yde_PZ8`F6I|Bu(nm(Q"><field name="VAR" id="#s`_Y[xa;[sh*VP;cEiI">strip</field></block></value><value name="rgb"><shadow type="neopixel_colors" id="c7SLlMRk#|Gy+LM)ulPz"><field name="color">NeoPixelColors.Violet</field></shadow></value></block></statement><statement name="ELSE"><block type="neopixel_set_strip_color" id="Y=?HjC]79Q}cB~=?Eq,3"><value name="strip"><block type="variables_get" id="=PDy1UsTOF-KdKSgvip`"><field name="VAR" id="#s`_Y[xa;[sh*VP;cEiI">strip</field></block></value><value name="rgb"><shadow type="neopixel_colors" id="h8Jaa0;AJ.HAS7|jAM}g"><field name="color">NeoPixelColors.Black</field></shadow></value></block></statement><next><block type="neopixel_show" id="ju=h.KfvJUsn4x;FDu7c"><value name="strip"><block type="variables_get" id="eCeWQmBTfNa{zIt`Id5M"><field name="VAR" id="#s`_Y[xa;[sh*VP;cEiI">strip</field></block></value></block></next></block></statement></block><block type="every_interval" id="KA=*iB7!UNMx?obgfF|`" x="2" y="858"><comment>MEASURE max/min brightness</comment><value name="interval"><shadow type="longTimePicker" id="Gglh6HoX*/l%(Z}RAOWU"><field name="ms">1000</field></shadow></value><statement name="HANDLER"><block type="variables_set" id="_biUXf!X?E1il2ou%kkm"><field name="VAR" id="NqWw1MSFxE47$`.zvIlz">light_level_max</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_op2" id="=jK1+H:sM]=zGTz/_8#_"><field name="op">max</field><value name="x"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="TjK6ES6PXV|KZ8B#oozZ"><field name="VAR" id="NqWw1MSFxE47$`.zvIlz">light_level_max</field></block></value><value name="y"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_light_level" id="=,W.tm!5ZQAgwrO8V+%Y"/></value></block></value><next><block type="variables_set" id="L@(jvCB@Ok#3.pUmi,0["><field name="VAR" id="Ns_]BsiW=M1B}w6#/r$.">light_level_min</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_op2" id="Q;n^.0UBE`xb0LY#:)OG"><field name="op">min</field><value name="x"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="j0KnY(-7Nc9Ze-RCBG-T"><field name="VAR" id="Ns_]BsiW=M1B}w6#/r$.">light_level_min</field></block></value><value name="y"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_light_level" id="%i?ZBciHLN?=-%l,Hb:$"/></value></block></value><next><block type="variables_set" id="d-.vBJd7:qiM%AM9S*]x"><field name="VAR" id="|`cd$~RqO3ekm*x]+A7D">light_level_diff</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="9r@TW.,%#K(x_A0R-;@{"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="?W],]i3=gnPyT.}{KOYH"><field name="VAR" id="NqWw1MSFxE47$`.zvIlz">light_level_max</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="XsGz$xX`8y#Jt3`H!4xI"><field name="VAR" id="Ns_]BsiW=M1B}w6#/r$.">light_level_min</field></block></value></block></value></block></next></block></next></block></statement></block><block type="every_interval" id=":dq6@[FB,2zPW;eWis9@" x="-3" y="1138"><comment>SIMULATE random brightness by covering light</comment><value name="interval"><shadow type="longTimePicker"><field name="ms">1000</field></shadow><block type="device_random" id=".rhzU90n4;cK_NOTa/!K"><value name="min"><shadow type="math_number" id="8niUFJ{p1qzQ}uN)Ag,O"><field name="NUM">5000</field></shadow></value><value name="limit"><shadow type="math_number" id="keO)$xXUgv![x=jZ2,;1"><field name="NUM">10000</field></shadow></value></block></value><statement name="HANDLER"><block type="servoservosetangle" id="m0J4}Y5TjqI~lHOijZ%G"><field name="servo">servos.P1</field><value name="degrees"><shadow type="protractorPicker" id="QlpSk~XhHNZ8e3S@cG%p"><field name="angle">0</field></shadow></value><next><block type="device_pause" id="9+hBNW#bw%PZ-~y4d+Hz"><value name="pause"><shadow type="timePicker"><field name="ms">2000</field></shadow><block type="device_random" id="GY$.D22r~:hu.2l(nGBT"><value name="min"><shadow type="math_number" id="~,*O;g^,C4pWdD~([-/t"><field name="NUM">2000</field></shadow></value><value name="limit"><shadow type="math_number" id="KLZ`0*E8bnzBB2W$K;]]"><field name="NUM">4000</field></shadow></value></block></value><next><block type="servoservosetangle" id="l6=UlesX)N$+U6bNgIYO"><field name="servo">servos.P1</field><value name="degrees"><shadow type="protractorPicker" id="gIJGE]lMloOkJ1+zvZgV"><field name="angle">90</field></shadow></value><next><block type="device_pause" id="Db}S2iz?hnPO3Hnao71~"><value name="pause"><shadow type="timePicker"><field name="ms">2000</field></shadow><block type="device_random" id="h-k=a4y-dLZYTXVVT6bV"><value name="min"><shadow type="math_number" id="yPcLzlrhiOn[hLtl[!tq"><field name="NUM">2000</field></shadow></value><value name="limit"><shadow type="math_number" id="%.^%$ge[qMn{mMf9?(AL"><field name="NUM">4000</field></shadow></value></block></value></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="xNv;*D-^M0r`Q$RyLm0%" x="-2" y="1439"><field name="NAME">Button.A</field><comment>MEASURE brightness</comment><statement name="HANDLER"><block type="device_plot_bar_graph" id="dlH.]9kxB[:1S7`QwzGB"><value name="value"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_light_level" id="@FNkmDM?jG@DNbPq)KEa"/></value><value name="high"><shadow type="math_number" id="O_V?=!SVDlteR_`4H=~y"><field name="NUM">255</field></shadow></value><next><block type="device_pause" id="=s~a?^|m8)4h.#`4.GLj"><value name="pause"><shadow type="timePicker" id="CfL3NFHB-hTD3#o.$C`("><field name="ms">5000</field></shadow></value><next><block type="device_clear_display" id="Y*ox+)vgG;bx0,Q0b3IJ"/></next></block></next></block></statement></block></xml>